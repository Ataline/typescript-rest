{"version":3,"sources":["server.ts"],"names":[],"mappings":"AACA,YAAY,CAAC;AAGb,iCAA6B,oBAAoB,CAAC,CAAA;AAMlD;IAAA;IAwEA,CAAC;IApEO,oBAAa,GAApB,UAAqB,MAAsB;QAC1C,IAAI,aAAa,GAAmB,IAAI,iCAAc,CAAC,MAAM,CAAC,CAAC;QAC/D,aAAa,CAAC,aAAa,EAAE,CAAC;IAC/B,CAAC;IAKM,eAAQ,GAAf;QACC,MAAM,CAAC,iCAAc,CAAC,QAAQ,EAAE,CAAC,OAAO,EAAE,CAAC;IAC5C,CAAC;IAMM,qBAAc,GAArB,UAAsB,IAAY;QACjC,MAAM,CAAC,iCAAc,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC,OAAO,EAAE,CAAC;IACtD,CAAC;IAOM,uBAAgB,GAAvB,UAAwB,MAAc;QACrC,iCAAc,CAAC,aAAa,GAAG,MAAM,CAAC;IACvC,CAAC;IAaM,wBAAiB,GAAxB,UAAyB,OAAgC;QACxD,iCAAc,CAAC,cAAc,GAAG,OAAO,CAAC;IACzC,CAAC;IAMM,kBAAW,GAAlB,UAAmB,IAAY;QAC9B,iCAAc,CAAC,QAAQ,GAAG,IAAI,CAAC;IAChC,CAAC;IAMM,oBAAa,GAApB,UAAqB,MAC6C;QACjE,iCAAc,CAAC,UAAU,GAAG,MAAM,CAAC;IACpC,CAAC;IAMM,oBAAa,GAApB,UAAqB,KAAa;QACjC,iCAAc,CAAC,UAAU,GAAG,KAAK,CAAC;IACnC,CAAC;IACF,aAAC;AAAD,CAxEA,AAwEC,IAAA;AAxEY,cAAM,SAwElB,CAAA","file":"server.js","sourcesContent":["/// <reference path=\"../../typings/index.d.ts\" />\n\"use strict\";\n\nimport * as express from \"express\"; \nimport {InternalServer} from \"./server-container\"; \nimport {HttpMethod} from \"./server-types\"; \n\n/**\n * The Http server main class. \n */\nexport class Server {\n\t/**\n\t * Create the routes for all classes decorated with our decorators\n\t */\n\tstatic buildServices(router: express.Router) {\n\t\tlet iternalServer: InternalServer = new InternalServer(router);\n\t\titernalServer.buildServices();\n\t}\n\n\t/**\n\t * Return all paths accepted by the Server\n\t */\n\tstatic getPaths(): Array<string> {\n\t\treturn InternalServer.getPaths().asArray();\n\t}\n\n\t/**\n\t * Return the set oh HTTP verbs configured for the given path\n\t * @param path The path to search HTTP verbs\n\t */\n\tstatic getHttpMethods(path: string): Array<HttpMethod> {\n\t\treturn InternalServer.getHttpMethods(path).asArray();\n\t}\n\n\t/**\n\t * A string used for signing cookies. This is optional and if not specified, \n\t * will not parse signed cookies.\n\t * @param secret the secret used to sign\n\t */\n\tstatic setCookiesSecret(secret: string) {\n\t\tInternalServer.cookiesSecret = secret;\n\t}\n\n\t/**\n\t * Specifies a function that will be used to decode a cookie's value. \n\t * This function can be used to decode a previously-encoded cookie value \n\t * into a JavaScript string.\n\t * The default function is the global decodeURIComponent, which will decode \n\t * any URL-encoded sequences into their byte representations.\n\t * \n\t * NOTE: if an error is thrown from this function, the original, non-decoded \n\t * cookie value will be returned as the cookie's value.\n\t * @param decoder The decoder function\n\t */\n\tstatic setCookiesDecoder(decoder: (val: string) => string) {\n\t\tInternalServer.cookiesDecoder = decoder;\n\t}\n\n\t/**\n\t * Set where to store the uploaded files\n\t * @param dest Destination folder\n\t */\n\tstatic setFileDest(dest: string) {\n\t\tInternalServer.fileDest = dest;\n\t}\n\n\t/**\n\t * Set a Function to control which files are accepted to upload\n\t * @param filter The filter function\n\t */\n\tstatic setFileFilter(filter: (req: Express.Request, file: Express.Multer.File, \n\t\t\t\t\tcallback: (error: Error, acceptFile: boolean) => void) => void) {\n\t\tInternalServer.fileFilter = filter;\n\t}\n\n\t/**\n\t * Set the limits of uploaded data\n\t * @param limit The data limit\n\t */\n\tstatic setFileLimits(limit: number) {\n\t\tInternalServer.fileLimits = limit;\n\t}\n}\n"]}